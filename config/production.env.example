# AMOSKYS Production Environment Configuration
# Copy this file to .env and fill in your production values

# =============================================================================
# Application Settings
# =============================================================================
FLASK_ENV=production
FLASK_DEBUG=false
SECRET_KEY=CHANGE_ME_TO_RANDOM_64_CHAR_STRING

# =============================================================================
# Server Configuration
# =============================================================================
PORT=8000
GUNICORN_WORKERS=4
GUNICORN_LOG_LEVEL=info
GUNICORN_ACCESS_LOG=/var/log/amoskys/access.log
GUNICORN_ERROR_LOG=/var/log/amoskys/error.log

# =============================================================================
# Database Configuration
# =============================================================================
DATABASE_URL=sqlite:///data/amoskys.db
# For PostgreSQL: postgresql://user:pass@localhost/amoskys
# For MySQL: mysql://user:pass@localhost/amoskys

# =============================================================================
# EventBus Configuration
# =============================================================================
BUS_SERVER_PORT=50051
BUS_OVERLOAD=false
BUS_MAX_ENV_BYTES=131072
BUS_DEDUPE_TTL_SEC=300
BUS_DEDUPE_MAX=50000
EVENTBUS_REQUIRE_CLIENT_AUTH=true

# =============================================================================
# Security Configuration
# =============================================================================
# SSL/TLS Certificates
SSL_KEYFILE=/etc/amoskys/certs/server.key
SSL_CERTFILE=/etc/amoskys/certs/server.crt
SSL_CA_CERTS=/etc/amoskys/certs/ca.crt

# Session security
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Strict

# CORS (if needed for API access)
CORS_ORIGINS=https://yourdomain.com

# =============================================================================
# Email Configuration (for notifications)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@amoskys.com
SMTP_FROM_NAME=AMOSKYS Security Platform

# Email development mode (set to false in production)
AMOSKYS_EMAIL_DEV_MODE=false

# =============================================================================
# Rate Limiting
# =============================================================================
RATELIMIT_STORAGE_URL=redis://localhost:6379
# Or use memory: memory://
RATELIMIT_STRATEGY=fixed-window

# =============================================================================
# Monitoring & Observability
# =============================================================================
# Prometheus metrics ports
EVENTBUS_METRICS_PORT_1=9000
EVENTBUS_METRICS_PORT_2=9100

# Sentry (optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project

# =============================================================================
# Agent Configuration
# =============================================================================
AGENT_HEARTBEAT_DIR=/var/run/amoskys
WAL_PATH=data/wal/flowagent.db
MAX_WAL_BYTES=104857600  # 100MB

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_REGISTRATION=false  # Set to true to allow user registration
REQUIRE_EMAIL_VERIFICATION=true
MAX_LOGIN_ATTEMPTS=5
LOGIN_LOCKOUT_DURATION=900  # 15 minutes in seconds

# =============================================================================
# Admin Configuration
# =============================================================================
# Create initial admin user (only on first run)
ADMIN_EMAIL=admin@amoskys.local
ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD
ADMIN_FULL_NAME=System Administrator
