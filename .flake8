[flake8]
# AMOSKYS Flake8 Configuration
# This config is used by both local development and CI
# Keep this in sync with what CI expects

max-line-length = 88
max-complexity = 15

# Exclude auto-generated and vendor files
exclude =
    .git,
    __pycache__,
    .venv,
    venv,
    build,
    dist,
    *.egg-info,
    *_pb2.py,
    *_pb2_grpc.py,
    migrations,
    .eggs,
    node_modules,
    proto

# Black-compatible ignores + practical ignores for enterprise code
# E203: Whitespace before ':' (conflicts with black)
# W503: Line break before binary operator (conflicts with black, PEP8 reversed this)
# E501: Line too long (black handles this)
# E402: Module level import not at top (needed for conditional imports)
# F841: Local variable assigned but never used (some intentional placeholders)
# F401: Module imported but unused (re-exports and fixtures)
# F403: Star imports (needed for pysnmp)
# F405: Names from star imports (needed for pysnmp)
# F811: Redefinition of unused name (test patterns)
# C901: Function is too complex (we have some complex agent logic)
extend-ignore =
    E203,
    W503,
    E501,
    E402,
    F841,
    F401,
    F403,
    F405,
    F811,
    F541,
    C901

# Per-file ignores for specific patterns
per-file-ignores =
    # Test files may have unused imports for fixtures
    tests/*:F401,F841
    # Init files often have imports for re-export
    */__init__.py:F401
    # Proto files are auto-generated
    src/amoskys/proto/*:ALL

# Output settings
show-source = true
statistics = true
count = true
